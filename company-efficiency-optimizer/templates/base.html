<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}AstraMech - AI-Powered Business Optimization{% endblock %}</title>
    <meta name="description" content="{% block meta_description %}AstraMech analyzes your data against 2025 industry benchmarks and deploys tailored AI agents to drive measurable improvements across all business areas.{% endblock %}">
    <meta name="theme-color" content="#0B1120">

    <meta property="og:title" content="{% block og_title %}AstraMech{% endblock %}">
    <meta property="og:description" content="{% block og_description %}AI-powered business optimization for every department.{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.url_root|trim('/') }}">
    <meta property="og:image" content="{{ url_for('static', filename='img/og-default.png') }}">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="AstraMech">
    <meta name="twitter:description" content="AI-powered business optimization for every department.">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&family=Manrope:wght@400;600;700&display=swap">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&family=Manrope:wght@400;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
        :root {
            --color-bg: #0B1120;
            --color-surface: #141B35;
            --color-surface-alt: #111831;
            --color-bg-alt: #0F1427;
            --color-text-primary: #FFFFFF;
            --color-text-secondary: #B5BEDF;
            --color-primary: #7B61FF;
            --color-primary-hover: #9D7CFF;
            --color-secondary: #00C8FF;
            --color-primary-gradient: linear-gradient(135deg, #9D7CFF 0%, #6C4DFF 100%);
            --color-secondary-gradient: linear-gradient(135deg, #7B61FF 0%, #00C8FF 100%);
            --color-highlight: #FFB020;
            --color-danger: #FF5555;
            --color-secondary-bg: #2D2F48;
            --radius-md: 12px;
            --shadow-soft: 0 0 20px rgba(123, 97, 255, 0.1);
            --shadow-strong: 0 8px 30px rgba(123, 97, 255, 0.2);
            --spacing-section: 100px;
        }
        
        * {
            transition: all 0.3s ease-in-out;
        }
        
        body {
            font-family: 'Inter', 'Manrope', 'Poppins', system-ui, -apple-system, sans-serif;
            font-size: 18px;
            line-height: 1.6;
            background: var(--color-bg);
            color: var(--color-text-primary);
            min-height: 100vh;
        }
        
        /* Jerarquía tipográfica optimizada */
        h1 {
            font-family: 'Poppins', 'Manrope', sans-serif;
            font-size: 56px;
            font-weight: 700;
            line-height: 1.2;
            color: var(--color-text-primary);
            margin-bottom: 1.5rem;
        }
        
        h2 {
            font-family: 'Poppins', 'Manrope', sans-serif;
            font-size: 36px;
            font-weight: 700;
            line-height: 1.3;
            color: var(--color-text-primary);
            margin-bottom: 1.25rem;
        }
        
        h3 {
            font-family: 'Poppins', 'Manrope', sans-serif;
            font-size: 24px;
            font-weight: 600;
            line-height: 1.4;
            color: var(--color-text-primary);
            margin-bottom: 1rem;
        }
        
        h4, h5, h6 {
            font-family: 'Poppins', 'Manrope', sans-serif;
            font-weight: 600;
            color: var(--color-text-primary);
        }
        
        p, li, span {
            color: var(--color-text-secondary);
        }
        
        .navbar {
            background: rgba(11, 17, 32, 0.95) !important;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(123, 97, 255, 0.1);
        }
        
        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--color-primary) !important;
            letter-spacing: 0.5px;
        }
        
        .nav-link {
            color: var(--color-text-secondary) !important;
        }
        
        .nav-link:hover {
            color: var(--color-text-primary) !important;
        }
        
        .btn-primary {
            background: var(--color-primary-gradient);
            border: none;
            color: white;
            font-weight: 600;
            padding: 12px 30px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-soft);
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #9D7CFF 0%, #7B61FF 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(123, 97, 255, 0.3);
        }
        
        .btn-outline-primary {
            border: 2px solid var(--color-primary);
            color: var(--color-primary);
            background: transparent;
            font-weight: 600;
            padding: 12px 30px;
            border-radius: var(--radius-md);
        }
        
        .btn-outline-primary:hover {
            background: var(--color-primary);
            color: white;
            transform: translateY(-2px);
        }
        
        .card {
            background: var(--color-surface);
            border: 1px solid rgba(123, 97, 255, 0.1);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-soft);
            color: var(--color-text-primary);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(123, 97, 255, 0.2);
        }
        
        .text-muted {
            color: var(--color-text-secondary) !important;
        }
        
        .bg-light {
            background: var(--color-bg) !important;
        }
        
        .bg-dark {
            background: var(--color-surface) !important;
        }
        
        .alert {
            border-radius: var(--radius-md);
            border: none;
        }
        
        .alert-danger {
            background: rgba(255, 85, 85, 0.1);
            color: var(--color-danger);
            border: 1px solid rgba(255, 85, 85, 0.3);
        }
        
        .alert-success {
            background: rgba(16, 160, 133, 0.1);
            color: #16A085;
            border: 1px solid rgba(16, 160, 133, 0.3);
        }
        
        .form-control, .form-select {
            background: var(--color-surface-alt);
            border: 1px solid rgba(123, 97, 255, 0.2);
            color: var(--color-text-primary);
            border-radius: var(--radius-md);
        }
        
        .form-control:focus, .form-select:focus {
            background: var(--color-surface-alt);
            border-color: var(--color-primary);
            color: var(--color-text-primary);
            box-shadow: 0 0 0 0.2rem rgba(123, 97, 255, 0.25);
        }
        
        .form-control::placeholder {
            color: var(--color-text-secondary);
        }
        
        .progress {
            background: var(--color-surface-alt);
            border-radius: var(--radius-md);
        }
        
        .progress-bar {
            background: var(--color-primary-gradient);
        }
        
        a:focus, button:focus {
            outline: 3px solid var(--color-primary) !important;
            outline-offset: 2px;
        }
        
        .skip-link {
            position: absolute;
            left: -999px;
            top: auto;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }
        
        .skip-link:focus {
            position: static;
            width: auto;
            height: auto;
            padding: 0.5rem 1rem;
            background: var(--color-primary);
            color: white;
            z-index: 1000;
        }
        
        footer {
            background: var(--color-surface) !important;
            border-top: 1px solid rgba(123, 97, 255, 0.1);
        }
        
        footer a {
            color: var(--color-text-secondary);
            text-decoration: none;
        }
        
        footer a:hover {
            color: var(--color-primary);
        }
        
        hr {
            border-color: rgba(123, 97, 255, 0.1) !important;
        }
        
        /* CTA Flotante Persistente */
        .floating-cta {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            animation: pulse 2s infinite;
        }
        
        .floating-cta .btn {
            box-shadow: 0 4px 20px rgba(123, 97, 255, 0.4);
            padding: 16px 32px;
            font-size: 1rem;
            font-weight: 700;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        /* Espaciado de secciones */
        section {
            padding: var(--spacing-section) 0;
        }
        
        /* Responsive breakpoints */
        @media (max-width: 768px) {
            h1 { font-size: 36px; }
            h2 { font-size: 28px; }
            h3 { font-size: 22px; }
            body { font-size: 16px; }
            .floating-cta {
                bottom: 20px;
                right: 20px;
            }
            .floating-cta .btn {
                padding: 12px 24px;
                font-size: 0.9rem;
            }
            section {
                padding: 60px 0;
            }
        }
        
        @media (max-width: 480px) {
            h1 { font-size: 28px; }
            h2 { font-size: 24px; }
            h3 { font-size: 20px; }
            .floating-cta {
                bottom: 15px;
                left: 15px;
                right: 15px;
            }
            .floating-cta .btn {
                width: 100%;
            }
        }
        
        /* Links con acento secundario */
        a {
            color: var(--color-secondary);
            text-decoration: none;
        }
        
        a:hover {
            color: var(--color-primary-hover);
        }
        
        /* Accesibilidad - Mejores contraste */
        .btn-primary, .btn-secondary {
            min-height: 48px;
            min-width: 48px;
        }
        
        /* Focus visible mejorado */
        *:focus-visible {
            outline: 3px solid var(--color-primary);
            outline-offset: 2px;
        }
    </style>

    {% block head_extra %}{% endblock %}

    <!-- Schema Markup JSON-LD para SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "AstraMech",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Web",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "description": "AI-powered business optimization platform that deploys specialized AI agents to analyze KPIs, detect inefficiencies, and drive measurable improvements across all business departments.",
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "ratingCount": "127"
        },
        "featureList": [
            "Multi-agent AI architecture",
            "KPI analysis and benchmarking",
            "Inefficiency detection",
            "Custom AI agent deployment",
            "Long-term memory with Pinecone"
        ]
    }
    </script>
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "AstraMech",
        "url": "{{ request.url_root|trim('/') }}",
        "logo": "{{ request.url_root|trim('/') }}/static/img/logo.png",
        "description": "AI-powered business optimization for every department",
        "sameAs": [
            "https://github.com/astramech",
            "https://twitter.com/astramech"
        ],
        "contactPoint": {
            "@type": "ContactPoint",
            "email": "support@astramech.ai",
            "contactType": "Customer Support"
        }
    }
    </script>

    {% if config.GA_MEASUREMENT_ID %}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ config.GA_MEASUREMENT_ID }}"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', '{{ config.GA_MEASUREMENT_ID }}');
    </script>
    {% endif %}
</head>
<body>
    <a class="skip-link" href="#main">Saltar al contenido</a>
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" role="navigation" aria-label="Principal">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('main.index') }}">
                <i class="fas fa-robot me-2"></i>AstraMech
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav" aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="nav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('main.index') }}">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('main.upload') }}">Upload</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('main.results') }}">Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('main.index') }}#agents">Agents</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('main.index') }}#about">About</a></li>
                    <li class="nav-item"><a class="nav-link btn btn-primary ms-2 text-white" href="{{ url_for('main.questionnaire') }}">Get Started</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <main id="main" tabindex="-1" style="padding-top: 80px;">
        {% block content %}{% endblock %}
    </main>

    <!-- CTA Flotante Persistente -->
    <div class="floating-cta" role="complementary" aria-label="Call to action">
        <a href="{{ url_for('main.questionnaire') }}" class="btn btn-primary" aria-label="Get Started with AstraMech">
            <i class="fas fa-rocket me-2"></i>Get Started
        </a>
    </div>

    <footer class="py-5 mt-5" role="contentinfo">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <h5 class="fw-bold mb-3">AstraMech</h5>
                    <p class="text-muted mb-0">AI-powered business optimization for every department. Multi-agent system built with CrewAI, Ollama, and Pinecone to transform organizational performance.</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h5 class="fw-bold mb-3">Resources</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-muted"><i class="fas fa-file-alt me-2"></i>API Documentation</a></li>
                        <li class="mb-2"><a href="#" class="text-muted"><i class="fab fa-github me-2"></i>GitHub Repository</a></li>
                    </ul>
                </div>
                <div class="col-md-4 mb-4">
                    <h5 class="fw-bold mb-3">Contact</h5>
                    <p class="mb-2"><a href="mailto:support@astramech.ai" class="text-muted"><i class="fas fa-envelope me-2"></i>support@astramech.ai</a></p>
                    <p class="mb-0 text-muted">Powered by CrewAI • Ollama • Pinecone</p>
                </div>
            </div>
            <hr class="my-4">
            <div class="text-center">
                <p class="mb-0 text-muted">&copy; 2025 AstraMech. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" defer async></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>
    <script defer>
      // Lightweight GA4 events wiring (only if GA is configured)
      (function(){
        if(!window.gtag) return;
        function bind(selector, event, name, extras){
          document.addEventListener('click', function(e){
            const el = e.target.closest(selector);
            if(!el) return;
            window.gtag('event', name, Object.assign({
              event_category: 'engagement',
              event_label: el.getAttribute('href') || el.id || el.name || selector
            }, extras||{}));
          });
        }
        bind('a.btn.btn-primary','click','cta_primary_click');
        bind('a.btn.btn-outline-light','click','cta_secondary_click');
      })();
    </script>
    {% block body_scripts %}{% endblock %}
</body>
</html>
